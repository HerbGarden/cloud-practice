timedatectl
	- 
	- server classroom.example.com iburst
		- server 주소 옵션
		- iburst - 빠르게 동기화 
	-chronyc sources -v
		- chrony 상태 보기	

	- 동기화가 꺼져 있을시
		- timedatectl set-ntp true

ntp 계층 -> stratum
da
chronyd 서비스 관련 명령어 및 설정파일

timedatectl 
timedatectl set-timezone Asia/Seoul
hwclock --show  ; hardware clock 의 시간정보 출력
hwclock --localtime --systohc  ; hwclock 을 localtime 으로 동기화
hwclock --utc --systohc  ; hwclock 을 utc 시간으로 동기화


chronyc source -v  ; client 가 참조하고 있는 
ntp server 의 연결상태, 동기화 상태 등을 출력

/etc/chrony.conf  ; chronyd 설정파일

server  ntp서버주소 [iburst]  ; iburst 는 선택사항

* iburst 를 사용하면 사용하지 않았을때보다  더 빠르게 시간동기화가 이루어진다.


logging 
--------
server0 에서  우선위가 alert 이상이고
facility 가 authpriv 인 경우
메세지를   /var/log/auth-erros 에 남기도록 설정.
-----------------------------
설정완료 후  rsyslogd restart 후
logger -p authpriv.alert "........"
cat /var/log/auth-errors    ; 이 파일에 메세시지가 저장되어 있어야 한다

	- cd /etc/rsyslog.conf
	- vi test.conf
	- authpriv.alert /var/log/auth-errors
	- systemctl restart rsyslog
	- logger -p authpriv.alert

------------------------------------------------------------

server0 에서 

logical volume 을 새로 생성해서 /mystorage 에 영구 마운트 되게 설정하세요

조건은 다음과 같습니다.
------------------------------------------------------------------
800메가 크기인 newvg 에 logical volume 이름이 newlv 를 생성.
PE size 크기는 한개당 16메가 크기로 설정
newlv 의 파일시스템 타입은 ext4 로 설정
newlv 크기는 PE 30개의 크기로 설정
physical volume 은 한개만 사용.
------------------------------------------------------------------

	- fdisk 로 설정
	- pvcreate /dev/...
	- vgcreate -s16m newvg /dev/...
	- lvgreate -l 30 -n newlv newvg
	- mkfs.ext4 /dev/newvg/newlv
	- mkdir /mystorage
	- vi /etc/fstab 설정하기
	- mount -a


logical volume 확장
-------------------

앞에서 생성한 logical volume newlv 의 전체 크기가 1.2 기가 크기가
되도록 logical volume newlv 의 용량을 확장하세요.
(* 마운트된 newlv의 파일시스템의 크기도 확장이 되어야 합니다)

--------------------------------------------------------------------

	- fdisk 로 새로운 디스크 잡아주기
	- pvcreate /dev/...
	- vgextend newvg /dev/...
	- lvresize -L 1.2G /dev/newvg/newlv
	- resize2fs /dev/newvg/newlv


systemd-tmpfiles

	man tmpfiles.d 참고

연습 명령어
ldap 연동
lab nfsmount setup

automount

	- exports 설정
	- securty option
		- sys --> default option
		  공유자원에서 client가 자신의 권한으로 access
							(uid, gid)

		- none : 공유 자원에 대해서 client 사용자가 nfsnobody 권한
		- krb5 : kerberos 인증을 한 사용자만 공유자원에 access 가능
		- krb5i : krb5 + 데이터 변조 체크 가능(무결성 체크)
		- krb5p : 송수신 패킷 암호화


		krb5p mount
			- mount s2:/shared/public /mnt/public
				- 안됨 : -o sys로 마운트함

			- -o sec=krb5p

		- kerberos와 연동을 위한 데몬
			- nfs-secure-server
			- nfs-secure

		- kerberos을이용하기 위해서는 keytab 필요
			- 보안 정보가 있음?
			- /etc/krb5.keytab 위치함
				strings 파일
					- 아스키 문자만 보여줌?


			authfs
				- /etc/auto.master 설정파일
				- /etc/auto.master.d/ 안에 새로운 설정파일 생성
				 vi *.autofs
					/mnt	/etc/auto.indirect
					간전맵
		
				/etc/auto.indirect
					manual -rw,sync s2:/shares/manual /mnt/manual
				 		
